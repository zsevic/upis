{"version":3,"sources":["constants/routes.js","constants/history.js","components/SignOut/index.js","components/Navigation/index.js","components/Faculty/Faculties/FacultyList/Table.js","components/Faculty/Faculties/FacultyList/queries.js","components/Faculty/Faculties/FacultyList/index.js","components/Faculty/Faculties/queries.js","components/Faculty/Faculties/index.js","components/Landing/index.js","components/Error/index.js","components/SignIn/queries.js","components/SignIn/index.js","components/Table/queries.js","components/Table/index.js","components/Account/queries.js","components/Session/queries.js","components/Account/index.js","components/Session/withAuthorization.js","components/App/index.js","components/Session/withSession.js","index.js"],"names":["LANDING","createHistory","basename","signOut","client","localStorage","removeItem","resetStore","history","push","SignOutButton","react_default","a","createElement","react_apollo_esm","DropdownItem","onClick","Navigation","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","toggle","bind","assertThisInitialized","state","isOpen","setState","Navbar","color","light","expand","NavbarBrand","Link","to","NavbarToggler","Collapse","navbar","Nav","className","UncontrolledDropdown","nav","inNavbar","DropdownToggle","caret","DropdownMenu","right","session","me","role","react","divider","SignOut","Component","TableComponent","_ref","faculty","Badge","pill","name","Table","responsive","hover","departments","map","department","index","key","id","scope","keys","concat","toUpperCase","slice","DEPARTMENT_UPDATED","gql","_templateObject","FacultyList","subscribeToMore","document","queries","updateQuery","previousResult","subscriptionData","data","faculties","FacultyList_Table","GET_PAGINATED_FACULTIES_WITH_DEPARTMENTS","queries_templateObject","MoreFacultiesButton","_ref3","limit","pageInfo","fetchMore","children","Button","variables","cursor","endCursor","_ref4","fetchMoreResult","objectSpread","edges","toConsumableArray","Faculties","Jumbotron","query","_ref2","loading","error","Spinner","FacultyList_FacultyList","hasNextPage","Faculties_MoreFacultiesButton","Landing","Faculty_Faculties","ErrorMessage","message","SIGN_IN","SignIn_queries_templateObject","INITIAL_STATE","login","password","SignInForm","onChange","event","_event$target","target","value","defineProperty","onSubmit","signIn","then","asyncToGenerator","regenerator_default","mark","_callee","wrap","_context","prev","next","setItem","token","refetch","routes","stop","_x","apply","arguments","preventDefault","_this2","_this$state","isInvalid","length","isEmail","mutation","Form","Row","form","Col","md","lg","size","offset","FormGroup","Label","for","Input","type","placeholder","disabled","Error","withRouter","SignIn_SignInForm","UP_PLACE","Table_queries_templateObject","DOWN_PLACE","_templateObject2","upPlace","upPlaceMutation","sent","_x2","downPlace","_callee2","downPlaceMutation","_context2","abrupt","_x3","_x4","_x5","attribute","facultyId","_ref5","index_es","_ref6","GET_STATS","Account_queries_templateObject","GET_ME","Session_queries_templateObject","withAuthorization","conditionFn","networkStatus","Redirect","components_Table_TableComponent","withSession","assign","Router","Navigation_Navigation","Route","exact","path","component","components_Landing","SignIn","components_Account","httpLink","HttpLink","uri","process","wsLink","WebSocketLink","options","reconnect","terminatingLink","split","_getMainDefinition","getMainDefinition","kind","operation","authLink","ApolloLink","forward","setContext","_ref2$headers","headers","getItem","x-token","errorLink","onError","graphQLErrors","networkError","forEach","locations","console","log","statusCode","link","from","cache","InMemoryCache","ApolloClient","ReactDOM","render","components_App","getElementById"],"mappings":"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","file":"static/js/main.917d4e0a.chunk.js","sourcesContent":["export const LANDING = '/'\nexport const SIGN_IN = '/login'\nexport const ACCOUNT = '/account'\n","import createHistory from 'history/createBrowserHistory'\n\nexport default createHistory({ basename: '/upis' })\n","import React from 'react'\nimport { ApolloConsumer } from 'react-apollo'\nimport { DropdownItem } from 'reactstrap'\n\nimport * as routes from '../../constants/routes'\nimport history from '../../constants/history'\n\nconst SignOutButton = () => (\n  <ApolloConsumer>\n    {client => (\n      <DropdownItem onClick={() => signOut(client)}>\n        Sign Out\n      </DropdownItem>\n    )}\n  </ApolloConsumer>\n)\n\nconst signOut = client => {\n  localStorage.removeItem('token')\n  client.resetStore()\n  history.push(routes.SIGN_IN)\n}\n\nexport { signOut }\n\nexport default SignOutButton\n","import React, { Component, Fragment } from 'react'\nimport {\n  Collapse,\n  Navbar,\n  NavbarToggler,\n  NavbarBrand,\n  Nav,\n  UncontrolledDropdown,\n  DropdownToggle,\n  DropdownMenu,\n  DropdownItem,\n} from 'reactstrap'\n\nimport SignOut from '../SignOut'\nimport { Link } from 'react-router-dom'\nexport default class Navigation extends Component {\n  constructor(props) {\n    super(props)\n\n    this.toggle = this.toggle.bind(this)\n    this.state = {\n      isOpen: false,\n    }\n  }\n  toggle() {\n    this.setState({\n      isOpen: !this.state.isOpen,\n    })\n  }\n  render() {\n    return (\n      <div>\n        <Navbar color=\"light\" light expand=\"md\">\n          <NavbarBrand>\n            <Link to=\"/\">upis</Link>\n          </NavbarBrand>\n          <NavbarToggler onClick={this.toggle} />\n          <Collapse isOpen={this.state.isOpen} navbar>\n            <Nav className=\"ml-auto\" navbar>\n              <UncontrolledDropdown nav inNavbar>\n                <DropdownToggle nav caret />\n                <DropdownMenu right>\n                  <DropdownItem>\n                    <Link to=\"/\">Faculties</Link>\n                  </DropdownItem>\n\n                  {this.props.session &&\n                  this.props.session.me &&\n                  this.props.session.me.role === 'ADMIN' ? (\n                    <Fragment>\n                      <DropdownItem>\n                        <Link to=\"/account\">Profile</Link>\n                      </DropdownItem>\n\n                      <DropdownItem divider />\n                      <DropdownItem>\n                        <SignOut>Log Out</SignOut>\n                      </DropdownItem>\n                    </Fragment>\n                  ) : (\n                    <Fragment>\n                      <DropdownItem>\n                        <Link to=\"/login\">Login</Link>\n                      </DropdownItem>\n                    </Fragment>\n                  )}\n                </DropdownMenu>\n              </UncontrolledDropdown>\n            </Nav>\n          </Collapse>\n        </Navbar>\n      </div>\n    )\n  }\n}\n","import React from 'react'\nimport { Badge, Table } from 'reactstrap'\n\nconst TableComponent = ({ faculty }) => (\n  <div>\n    <Badge color=\"primary\" pill>\n      {faculty.name}\n    </Badge>\n    <Table responsive hover>\n      <thead>\n        <tr>\n          <th>#</th>\n          <th>Department</th>\n          <th>Total</th>\n          <th>Budget</th>\n          <th>Self-financing</th>\n        </tr>\n      </thead>\n      <tbody>\n        {faculty.departments.map((department, index) => {\n          return (\n            <tr key={department.id}>\n              <th scope=\"row\">{index + 1}</th>\n              {Object.keys(department).map(key => {\n                switch (key) {\n                  case 'name':\n                  case 'total':\n                    return (\n                      <td\n                        key={key}\n                        className={`department${key[0].toUpperCase()}${key.slice(\n                          1,\n                        )}`}\n                      >\n                        {department[key]}\n                      </td>\n                    )\n                  case 'budget':\n                  case 'selfFinancing':\n                    return (\n                      <td\n                        key={key}\n                        className={`department${key[0].toUpperCase()}${key.slice(\n                          1,\n                        )}`}\n                      >\n                        {department[key]}\n                      </td>\n                    )\n                  default:\n                    return ''\n                }\n              })}\n            </tr>\n          )\n        })}\n      </tbody>\n    </Table>\n  </div>\n)\n\nexport default TableComponent\n","import gql from 'graphql-tag'\n\nexport const DEPARTMENT_UPDATED = gql`\n  subscription {\n    departmentUpdated {\n      department {\n        id\n        name\n        total\n        budget\n        selfFinancing\n      }\n    }\n  }\n`\n","import React, { Component } from 'react'\n\nimport Table from './Table'\nimport * as queries from './queries'\n\nexport default class FacultyList extends Component {\n  subscribeToMore = () => {\n    this.props.subscribeToMore({\n      document: queries.DEPARTMENT_UPDATED,\n      updateQuery: (previousResult, { subscriptionData }) => {\n        if (!subscriptionData.data) {\n          return previousResult\n        }\n\n        return previousResult\n      },\n    })\n  }\n\n  componentDidMount() {\n    this.subscribeToMore()\n  }\n\n  render() {\n    const { faculties } = this.props\n\n    return faculties.map(faculty => (\n      <Table key={faculty.id} faculty={faculty} />\n    ))\n  }\n}\n","import gql from 'graphql-tag'\n\nexport const GET_PAGINATED_FACULTIES_WITH_DEPARTMENTS = gql`\n  query($cursor: String, $limit: Int!) {\n    faculties(cursor: $cursor, limit: $limit) {\n      edges {\n        id\n        name\n        createdAt\n        departments {\n          id\n          name\n          total\n          budget\n          selfFinancing\n        }\n      }\n      pageInfo {\n        hasNextPage\n        endCursor\n      }\n    }\n  }\n`\n","import React, { Fragment } from 'react'\nimport { Jumbotron, Spinner, Button } from 'reactstrap'\nimport { Query } from 'react-apollo'\n\nimport FacultyList from './FacultyList'\nimport * as queries from './queries'\n\nconst Faculties = ({ limit }) => (\n  <div>\n    <Jumbotron>\n      <Query\n        query={queries.GET_PAGINATED_FACULTIES_WITH_DEPARTMENTS}\n        variables={{ limit }}\n      >\n        {({ data, loading, error, fetchMore, subscribeToMore }) => {\n          if (!data) {\n            return <div>There are no faculties...</div>\n          }\n\n          const { faculties } = data\n\n          if (loading || !faculties) {\n            return (\n              <div>\n                <Spinner color=\"primary\" />\n              </div>\n            )\n          }\n\n          const { edges, pageInfo } = faculties\n\n          return (\n            <Fragment>\n              <FacultyList\n                faculties={edges}\n                subscribeToMore={subscribeToMore}\n              />\n\n              {pageInfo.hasNextPage && (\n                <MoreFacultiesButton\n                  limit={limit}\n                  pageInfo={pageInfo}\n                  fetchMore={fetchMore}\n                >\n                  More\n                </MoreFacultiesButton>\n              )}\n            </Fragment>\n          )\n        }}\n      </Query>\n    </Jumbotron>\n  </div>\n)\n\nconst MoreFacultiesButton = ({\n  limit,\n  pageInfo,\n  fetchMore,\n  children,\n}) => (\n  <Button\n    color=\"secondary\"\n    onClick={() =>\n      fetchMore({\n        variables: { cursor: pageInfo.endCursor, limit },\n        updateQuery: (previousResult, { fetchMoreResult }) => {\n          if (!fetchMoreResult) {\n            return previousResult\n          }\n          return {\n            faculties: {\n              ...fetchMoreResult.faculties,\n              edges: [\n                ...previousResult.faculties.edges,\n                ...fetchMoreResult.faculties.edges,\n              ],\n            },\n          }\n        },\n      })\n    }\n  >\n    {children}\n  </Button>\n)\n\nexport default Faculties\n","import React from 'react'\n\nimport { Faculties } from '../Faculty'\n\nconst Landing = () => (\n  <div>\n    <Faculties limit={2} />\n  </div>\n)\n\nexport default Landing\n","import React from 'react'\n\nconst ErrorMessage = ({ error }) => (\n  <div>\n    <small>{error.message}</small>\n  </div>\n)\n\nexport default ErrorMessage\n","import gql from 'graphql-tag'\n\nexport const SIGN_IN = gql`\n  mutation($login: String!, $password: String!) {\n    signIn(login: $login, password: $password) {\n      token\n    }\n  }\n`\n","import React, { Component } from 'react'\nimport { withRouter } from 'react-router-dom'\nimport { Mutation } from 'react-apollo'\nimport { isEmail } from 'validator'\n\nimport * as routes from '../../constants/routes'\nimport ErrorMessage from '../Error'\n\nimport {\n  Jumbotron,\n  Col,\n  Row,\n  Button,\n  Form,\n  FormGroup,\n  Label,\n  Input,\n} from 'reactstrap'\n\nimport * as queries from './queries'\n\nconst SignInPage = ({ history, refetch }) => (\n  <div>\n    <Jumbotron>\n      <h1 className=\"display-3 text-center\">Login</h1>\n      <SignInForm history={history} refetch={refetch} />\n    </Jumbotron>\n  </div>\n)\n\nconst INITIAL_STATE = {\n  login: '',\n  password: '',\n}\n\nclass SignInForm extends Component {\n  state = { ...INITIAL_STATE }\n\n  onChange = event => {\n    const { name, value } = event.target\n    this.setState({ [name]: value })\n  }\n\n  onSubmit = (event, signIn) => {\n    signIn().then(async ({ data }) => {\n      this.setState({ ...INITIAL_STATE })\n\n      localStorage.setItem('token', data.signIn.token)\n\n      await this.props.refetch()\n\n      this.props.history.push(routes.LANDING)\n    })\n\n    event.preventDefault()\n  }\n\n  render() {\n    const { login, password } = this.state\n\n    const isInvalid = password.length < 7 || !isEmail(login)\n\n    return (\n      <Mutation\n        mutation={queries.SIGN_IN}\n        variables={{ login, password }}\n      >\n        {(signIn, { data, loading, error }) => (\n          <Form onSubmit={event => this.onSubmit(event, signIn)}>\n            <Row form>\n              <Col md={6} lg={{ size: 3, offset: 2 }}>\n                <FormGroup>\n                  <Label for=\"userEmail\">Email</Label>\n                  <Input\n                    name=\"login\"\n                    value={login}\n                    onChange={this.onChange}\n                    type=\"email\"\n                    id=\"userEmail\"\n                    placeholder=\"Email or Username\"\n                  />\n                </FormGroup>\n              </Col>\n              <Col md={6} lg={{ size: 3, offset: 2 }}>\n                <Label for=\"userPassword\">Password</Label>\n                <Input\n                  name=\"password\"\n                  value={password}\n                  onChange={this.onChange}\n                  type=\"password\"\n                  id=\"userPassword\"\n                  placeholder=\"Password\"\n                />\n              </Col>\n\n              <Col md={6} lg={{ size: 3, offset: 2 }}>\n                <p className=\"lead\">\n                  <Button\n                    disabled={isInvalid || loading}\n                    type=\"submit\"\n                  >\n                    Sign In\n                  </Button>\n                </p>\n              </Col>\n              {error && <ErrorMessage error={error} />}\n            </Row>\n          </Form>\n        )}\n      </Mutation>\n    )\n  }\n}\n\nexport default withRouter(SignInPage)\n\nexport { SignInForm }\n","import gql from 'graphql-tag'\n\nexport const UP_PLACE = gql`\n  mutation($id: ID!, $attribute: String!, $facultyId: ID!) {\n    upPlace(id: $id, attribute: $attribute, facultyId: $facultyId) {\n      id\n      name\n      total\n      budget\n      selfFinancing\n    }\n  }\n`\n\nexport const DOWN_PLACE = gql`\n  mutation($id: ID!, $attribute: String!, $facultyId: ID!) {\n    downPlace(id: $id, attribute: $attribute, facultyId: $facultyId) {\n      id\n      name\n      total\n      budget\n      selfFinancing\n    }\n  }\n`\n","import React, { Component } from 'react'\nimport { Badge, Table } from 'reactstrap'\nimport { Mutation } from 'react-apollo'\n\nimport { ArrowDropUp, ArrowDropDown } from '@material-ui/icons'\n\nimport * as queries from './queries'\n\nexport default class TableComponent extends Component {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      departments: [...this.props.faculty.departments],\n    }\n  }\n\n  upPlace = async (index, upPlaceMutation) => {\n    const { data } = await upPlaceMutation()\n    const { upPlace } = data\n\n    const { departments } = this.state\n\n    departments[index] = { ...upPlace }\n\n    this.setState({ departments })\n  }\n\n  downPlace = async (index, key, downPlaceMutation) => {\n    const { departments } = this.state\n    if (departments[index][key] <= 0) return\n\n    const { data } = await downPlaceMutation()\n    const { downPlace } = data\n\n    departments[index] = { ...downPlace }\n\n    this.setState({ departments })\n  }\n\n  render() {\n    return (\n      <div>\n        <Badge color=\"primary\" pill>\n          {this.props.faculty.name}\n        </Badge>\n        <Table responsive hover>\n          <thead>\n            <tr>\n              <th>#</th>\n              <th>Department</th>\n              <th>Total</th>\n              <th>Budget</th>\n              <th>Self-financing</th>\n            </tr>\n          </thead>\n          <tbody>\n            {this.props.faculty.departments.map(\n              (department, index) => {\n                return (\n                  <tr key={department.id}>\n                    <th scope=\"row\">{index + 1}</th>\n                    {Object.keys(department).map(key => {\n                      switch (key) {\n                        case 'name':\n                        case 'total':\n                          return (\n                            <td\n                              key={key}\n                              className={`department${key[0].toUpperCase()}${key.slice(\n                                1,\n                              )}`}\n                            >\n                              {this.state.departments[index][key]}\n                            </td>\n                          )\n                        case 'budget':\n                        case 'selfFinancing':\n                          return (\n                            <td\n                              key={key}\n                              className={`department${key[0].toUpperCase()}${key.slice(\n                                1,\n                              )}`}\n                            >\n                              {this.props.session &&\n                              this.props.session.me ? (\n                                <Mutation\n                                  mutation={queries.UP_PLACE}\n                                  variables={{\n                                    id: department.id,\n                                    attribute: key,\n                                    facultyId: this.props.faculty.id,\n                                  }}\n                                >\n                                  {(\n                                    upPlaceMutation,\n                                    { data, loading, error },\n                                  ) => (\n                                    <ArrowDropUp\n                                      onClick={() =>\n                                        this.upPlace(\n                                          index,\n                                          upPlaceMutation,\n                                        )\n                                      }\n                                    />\n                                  )}\n                                </Mutation>\n                              ) : (\n                                ''\n                              )}\n\n                              {this.state.departments[index][key]}\n\n                              {this.props.session &&\n                              this.props.session.me ? (\n                                <Mutation\n                                  mutation={queries.DOWN_PLACE}\n                                  variables={{\n                                    id: department.id,\n                                    attribute: key,\n                                    facultyId: this.props.faculty.id,\n                                  }}\n                                >\n                                  {(\n                                    downPlaceMutation,\n                                    { data, loading, error },\n                                  ) => (\n                                    <ArrowDropDown\n                                      onClick={() =>\n                                        this.downPlace(\n                                          index,\n                                          key,\n                                          downPlaceMutation,\n                                        )\n                                      }\n                                    />\n                                  )}\n                                </Mutation>\n                              ) : (\n                                ''\n                              )}\n                            </td>\n                          )\n                        default:\n                          return ''\n                      }\n                    })}\n                  </tr>\n                )\n              },\n            )}\n          </tbody>\n        </Table>\n      </div>\n    )\n  }\n}\n","import gql from 'graphql-tag'\n\nexport const GET_STATS = gql`\n  query($id: ID!) {\n    faculty(id: $id) {\n      id\n      name\n      departments {\n        id\n        name\n        total\n        budget\n        selfFinancing\n      }\n    }\n  }\n`\n","import gql from 'graphql-tag'\n\nexport const GET_ME = gql`\n  {\n    me {\n      id\n      username\n      email\n      role\n      faculty {\n        id\n      }\n    }\n  }\n`\n","import React, { Fragment } from 'react'\nimport { Spinner } from 'reactstrap'\nimport { Query } from 'react-apollo'\n\nimport Table from '../Table'\nimport * as queries from './queries'\n\nimport withAuthorization from '../Session/withAuthorization'\n\nconst Account = ({ session }) => (\n  <div>\n    <Query\n      query={queries.GET_STATS}\n      variables={{ id: session.me.faculty.id }}\n    >\n      {({ data, loading }) => {\n        const { faculty } = data\n\n        if (loading || !faculty) {\n          return (\n            <div>\n              <Spinner color=\"primary\" />\n            </div>\n          )\n        }\n\n        return (\n          <Fragment>\n            <Table\n              key={faculty.id}\n              session={session}\n              faculty={faculty}\n            />\n          </Fragment>\n        )\n      }}\n    </Query>\n  </div>\n)\n\nexport default withAuthorization(\n  session => session.me && session.me.role === 'ADMIN',\n)(Account)\n","import React from 'react'\nimport { Query } from 'react-apollo'\nimport { Redirect } from 'react-router-dom'\n\nimport * as routes from '../../constants/routes'\nimport { GET_ME } from './queries'\n\nconst withAuthorization = conditionFn => Component => props => (\n  <Query query={GET_ME}>\n    {({ data, networkStatus }) => {\n      if (networkStatus < 7) {\n        return null\n      }\n\n      return conditionFn(data) ? (\n        <Component {...props} />\n      ) : (\n        <Redirect to={routes.SIGN_IN} />\n      )\n    }}\n  </Query>\n)\n\nexport default withAuthorization\n","import React from 'react'\nimport { Route, Router } from 'react-router-dom'\n\nimport Navigation from '../Navigation'\nimport LandingPage from '../Landing'\nimport SignInPage from '../SignIn'\nimport AccountPage from '../Account'\nimport withSession from '../Session/withSession'\n\nimport * as routes from '../../constants/routes'\nimport history from '../../constants/history'\n\nconst App = ({ session, refetch }) => (\n  <Router history={history}>\n    <div>\n      <Navigation session={session} />\n\n      <hr />\n\n      <Route\n        exact\n        path={routes.LANDING}\n        component={() => <LandingPage />}\n      />\n      <Route\n        exact\n        path={routes.SIGN_IN}\n        component={() => <SignInPage refetch={refetch} />}\n      />\n      <Route\n        exact\n        path={routes.ACCOUNT}\n        component={() => <AccountPage session={session} />}\n      />\n    </div>\n  </Router>\n)\n\nexport default withSession(App)\n","import React from 'react'\nimport { Query } from 'react-apollo'\nimport { GET_ME } from './queries'\n\nconst withSession = Component => props => (\n  <Query query={GET_ME}>\n    {({ data, refetch }) => (\n      <Component {...props} session={data} refetch={refetch} />\n    )}\n  </Query>\n)\n\nexport default withSession\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport { ApolloProvider } from 'react-apollo'\nimport { ApolloClient } from 'apollo-client'\nimport { getMainDefinition } from 'apollo-utilities'\nimport { ApolloLink, split } from 'apollo-link'\nimport { HttpLink } from 'apollo-link-http'\nimport { WebSocketLink } from 'apollo-link-ws'\nimport { onError } from 'apollo-link-error'\nimport { InMemoryCache } from 'apollo-cache-inmemory'\n\nimport 'bootstrap/dist/css/bootstrap.min.css'\n\nimport App from './components/App'\nimport { signOut } from './components/SignOut'\n\nconst httpLink = new HttpLink({\n  uri:\n    process.env.REACT_APP_DEVSERVER ||\n    'https://upis.herokuapp.com/graphql',\n})\n\nconst wsLink = new WebSocketLink({\n  uri: process.env.REACT_APP_WS || `wss://upis.herokuapp.com/graphql`,\n  options: {\n    reconnect: true,\n  },\n})\n\nconst terminatingLink = split(\n  ({ query }) => {\n    const { kind, operation } = getMainDefinition(query)\n    return (\n      kind === 'OperationDefinition' && operation === 'subscription'\n    )\n  },\n  wsLink,\n  httpLink,\n)\n\nconst authLink = new ApolloLink((operation, forward) => {\n  operation.setContext(({ headers = {} }) => {\n    const token = localStorage.getItem('token')\n\n    if (token) {\n      headers = { ...headers, 'x-token': token }\n    }\n\n    return { headers }\n  })\n\n  return forward(operation)\n})\n\nconst errorLink = onError(({ graphQLErrors, networkError }) => {\n  if (graphQLErrors) {\n    graphQLErrors.forEach(({ message, locations, path }) => {\n      console.log('GraphQL error', message)\n\n      if (\n        message === 'UNAUTHENTICATED' ||\n        message === 'Your session expired. Sign in again.'\n      ) {\n        signOut(client)\n      }\n    })\n  }\n\n  if (networkError) {\n    console.log('Network error', networkError)\n\n    if (networkError.statusCode === 401) {\n      signOut(client)\n    }\n  }\n})\n\nconst link = ApolloLink.from([authLink, errorLink, terminatingLink])\n\nconst cache = new InMemoryCache()\n\nconst client = new ApolloClient({\n  link,\n  cache,\n})\n\nReactDOM.render(\n  <ApolloProvider client={client}>\n    <App />\n  </ApolloProvider>,\n  document.getElementById('root'),\n)\n"],"sourceRoot":""}